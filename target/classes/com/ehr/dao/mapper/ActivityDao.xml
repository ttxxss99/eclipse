<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ehr.dao.ActivityDao">
	<resultMap id="BaseResultMap" type="com.ehr.model.Activity">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Jun 23 
			19:50:14 CST 2019. -->
		<id column="id" jdbcType="INTEGER" property="id" />
		<result column="theme" jdbcType="VARCHAR" property="theme" />
		<result column="activityAddress" jdbcType="VARCHAR"
			property="activityaddress" />
		<result column="introduce" jdbcType="VARCHAR"
			property="introduce" />
		<result column="activityTheDetail" jdbcType="VARCHAR"
			property="activitythedetail" />
		<result column="initateTime" jdbcType="TIMESTAMP"
			property="initatetime" />
		<result column="spending" jdbcType="INTEGER"
			property="spending" />
		<result column="state" jdbcType="INTEGER" property="state" />
		<result column="emp_id" jdbcType="INTEGER" property="empId" />
		<result column="logicToDelete" jdbcType="INTEGER"
			property="logictodelete" />
	</resultMap>
	<delete id="deleteByPrimaryKey"
		parameterType="java.lang.Integer">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Jun 23 
			19:50:14 CST 2019. -->
		delete from ehr_activity
		where id = #{id,jdbcType=INTEGER}
	</delete>
	<insert id="insert" parameterType="com.ehr.model.Activity">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Jun 23 
			19:50:14 CST 2019. -->
		<selectKey keyProperty="id" order="AFTER"
			resultType="java.lang.Integer">
			SELECT LAST_INSERT_ID()
		</selectKey>
		insert into ehr_activity (theme, activityAddress, introduce,
		activityTheDetail, initateTime, spending,
		state, emp_id, logicToDelete
		)
		values (#{theme,jdbcType=VARCHAR}, #{activityaddress,jdbcType=VARCHAR},
		#{introduce,jdbcType=VARCHAR},
		#{activitythedetail,jdbcType=VARCHAR}, #{initatetime,jdbcType=TIMESTAMP}, #{spending,jdbcType=INTEGER},
		#{state,jdbcType=INTEGER}, #{empId,jdbcType=INTEGER},
		#{logictodelete,jdbcType=INTEGER}
		)
	</insert>
	<update id="updateByPrimaryKey"
		parameterType="com.ehr.model.Activity">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Jun 23 
			19:50:14 CST 2019. -->
		update ehr_activity
		set theme = #{theme,jdbcType=VARCHAR},
		activityAddress = #{activityaddress,jdbcType=VARCHAR},
		introduce = #{introduce,jdbcType=VARCHAR},
		activityTheDetail = #{activitythedetail,jdbcType=VARCHAR},
		initateTime = #{initatetime,jdbcType=TIMESTAMP},
		spending = #{spending,jdbcType=INTEGER},
		state = #{state,jdbcType=INTEGER},
		emp_id = #{empId,jdbcType=INTEGER},
		logicToDelete = #{logictodelete,jdbcType=INTEGER}
		where id = #{id,jdbcType=INTEGER}
	</update>
	<select id="selectByPrimaryKey"
		parameterType="java.lang.Integer" resultMap="BaseResultMap">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Jun 23 
			19:50:14 CST 2019. -->
		select id, theme, activityAddress, introduce, activityTheDetail,
		initateTime, spending,
		state, emp_id, logicToDelete
		from ehr_activity
		where id = #{id,jdbcType=INTEGER}
	</select>
	<select id="selectAll" resultMap="BaseResultMap">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Jun 23 
			19:50:14 CST 2019. -->
		select id, theme, activityAddress, introduce, activityTheDetail,
		initateTime, spending,
		state, emp_id, logicToDelete
		from ehr_activity
	</select>

	<select id="selectLike" resultType="com.ehr.model.pojo.ActivityQiantai">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Jun 23 
			21:49:02 CST 2019. -->
		SELECT ehr_activity.theme,ehr_activity.activityAddress,ehr_activity.introduce,ehr_activity.activityTheDetail,ehr_activity.initateTime,		ehr_activity.spending,ehr_activity.state,ehr_emp.`name`,ehr_activity.id
 		FROM ehr_activity,ehr_emp 
		<where>
			<if test="activityAddress!=null">
				AND activityAddress LIKE concat("%",#{activityAddress},"%")  AND ehr_activity.emp_id=  ehr_emp.id
			</if>
			<if test="name!=null">
    			AND ehr_activity.emp_id=ehr_emp.id AND name LIKE concat("%",#{name},"%") 
    		</if>
		</where>
	</select>
</mapper>